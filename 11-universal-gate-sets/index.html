<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Gate Sets - Quantum Gates Learning</title>
    <link rel="stylesheet" href="../shared/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        .bloch-container { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin: 20px 0; align-items: center; }
        .bloch-panel { background: rgba(0,0,0,0.4); border-radius: 12px; padding: 15px; text-align: center; }
        .bloch-panel h4 { color: #64ffda; margin-bottom: 10px; }
        .bloch-canvas { width: 280px; height: 280px; border-radius: 8px; }
        .gate-btn { padding: 8px 14px; margin: 3px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: all 0.2s; }
        .prereq-box { background: linear-gradient(135deg, rgba(100,255,218,0.1), rgba(78,205,196,0.05)); border: 2px solid rgba(100,255,218,0.3); border-radius: 16px; padding: 25px; margin: 20px 0; }
        .prereq-box h3 { color: #64ffda; margin-bottom: 15px; }
        .prereq-item { background: rgba(0,0,0,0.3); border-radius: 10px; padding: 15px; margin: 12px 0; border-left: 4px solid #64ffda; }
        .prereq-item h4 { color: #4ecdc4; margin-bottom: 8px; }
        .gate-set-card { background: rgba(100,255,218,0.05); border: 1px solid rgba(100,255,218,0.2); border-radius: 12px; padding: 20px; margin: 15px 0; }
        .gate-set-card h4 { color: #64ffda; margin-bottom: 12px; }
        .gate-list { display: flex; gap: 10px; flex-wrap: wrap; margin: 10px 0; }
        .gate-chip { padding: 8px 16px; background: linear-gradient(135deg, rgba(100,255,218,0.3), rgba(78,205,196,0.2)); border: 1px solid rgba(100,255,218,0.4); border-radius: 20px; color: #64ffda; font-weight: bold; font-size: 14px; }
        .universal-badge { display: inline-block; padding: 4px 12px; background: linear-gradient(135deg, #ffd93d, #ffed4a); color: #000; border-radius: 12px; font-size: 12px; font-weight: bold; margin-left: 10px; }
        .not-universal { background: linear-gradient(135deg, #ff6b6b, #ff8e8e); }
        .concept-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 20px 0; }
        .concept-card { background: rgba(100,255,218,0.05); border: 1px solid rgba(100,255,218,0.2); border-radius: 12px; padding: 20px; }
        .concept-card h4 { color: #64ffda; margin-bottom: 12px; }
        .hierarchy { background: rgba(0,0,0,0.3); border-radius: 12px; padding: 25px; margin: 20px 0; }
        .hierarchy-level { display: flex; align-items: center; gap: 15px; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .level-1 { background: rgba(255,215,61,0.2); border-left: 4px solid #ffd93d; }
        .level-2 { background: rgba(100,255,218,0.15); border-left: 4px solid #64ffda; margin-left: 30px; }
        .level-3 { background: rgba(168,85,247,0.15); border-left: 4px solid #a855f7; margin-left: 60px; }
        .level-name { font-weight: bold; min-width: 150px; }
        .level-1 .level-name { color: #ffd93d; }
        .level-2 .level-name { color: #64ffda; }
        .level-3 .level-name { color: #a855f7; }
        .decision-guide { background: rgba(255,215,0,0.1); border: 1px solid rgba(255,215,0,0.3); border-radius: 12px; padding: 20px; margin: 20px 0; }
        .decision-guide h3 { color: #ffd93d; margin-bottom: 15px; }
        .decision-item { display: flex; align-items: flex-start; gap: 15px; padding: 12px; background: rgba(0,0,0,0.2); border-radius: 8px; margin: 10px 0; }
        .decision-item .goal { color: #4ecdc4; font-weight: bold; min-width: 200px; }
        .decision-item .solution { color: #fff; }
        .decision-item .gate { color: #ff6b6b; font-weight: bold; }
        .approximation-visual { background: rgba(0,0,0,0.3); border-radius: 12px; padding: 20px; margin: 15px 0; text-align: center; }
        .approx-equation { font-size: 18px; color: #64ffda; font-family: monospace; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Universal Gate Sets</h1>
            <p class="subtitle">Building Any Quantum Operation from Basic Gates</p>
        </header>

        <section class="section">
            <div class="prereq-box">
                <h3>Prerequisites</h3>
                <div class="prereq-item">
                    <h4>1. Single-Qubit Gates</h4>
                    <p>You should know H, X, Y, Z, S, T gates and rotation gates Rx, Ry, Rz.</p>
                </div>
                <div class="prereq-item">
                    <h4>2. Two-Qubit Gates</h4>
                    <p>CNOT is the key two-qubit gate for universality. It creates entanglement.</p>
                </div>
                <div class="prereq-item">
                    <h4>3. Gate Composition</h4>
                    <p>Gates can be combined in sequence. The order matters! UV ≠ VU in general.</p>
                </div>
            </div>
        </section>

                <section class="section">
                    <h2>What is a Universal Gate Set?</h2>
                    <div class="highlight">
                        <p>A <strong>universal gate set</strong> is a finite set of gates that can approximate ANY quantum operation to arbitrary precision.</p>
                        <p style="color:#888;margin-top:10px;">Think of it like having a small set of LEGO bricks that can build anything!</p>
                    </div>
            
                    <div class="bloch-container">
                        <div class="bloch-panel">
                            <h4>Reach Any Point with {H, T, CNOT}</h4>
                            <div id="universal-bloch" class="bloch-canvas"></div>
                            <div style="margin-top:15px;">
                                <button class="gate-btn" onclick="applyUnivGate('H')" style="background:#64ffda;color:#000;">H</button>
                                <button class="gate-btn" onclick="applyUnivGate('T')" style="background:#a855f7;color:#fff;">T</button>
                                <button class="gate-btn" onclick="applyUnivGate('X')" style="background:#ff6b6b;color:#fff;">X</button>
                                <button class="gate-btn" onclick="applyUnivGate('Z')" style="background:#ffd93d;color:#000;">Z</button>
                                <button class="gate-btn" onclick="resetUnivBloch()" style="background:rgba(100,255,218,0.2);color:#64ffda;border:1px solid #64ffda;">Reset</button>
                            </div>
                            <p id="univ-note" style="color:#888;margin-top:10px;font-size:0.9em;">Apply gates to reach any point on the sphere</p>
                        </div>
                    </div>
            
            <div class="concept-grid">
                <div class="concept-card">
                    <h4>Exact vs Approximate</h4>
                    <p>Some gates can be built exactly (like X from H and Z). Others can only be approximated to any desired accuracy.</p>
                </div>
                <div class="concept-card">
                    <h4>Finite Set</h4>
                    <p>Remarkably, just 2-3 gates are enough! You don't need infinitely many different gates.</p>
                </div>
                <div class="concept-card">
                    <h4>Solovay-Kitaev Theorem</h4>
                    <p>Any gate can be approximated with O(log^c(1/ε)) gates from a universal set, where ε is the error.</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Common Universal Gate Sets</h2>
            
            <div class="gate-set-card">
                <h4>{H, T, CNOT} <span class="universal-badge">UNIVERSAL</span></h4>
                <div class="gate-list">
                    <span class="gate-chip">H</span>
                    <span class="gate-chip">T</span>
                    <span class="gate-chip">CNOT</span>
                </div>
                <p style="color:#888;margin-top:10px;">The most common universal set. H creates superposition, T adds non-Clifford magic, CNOT entangles.</p>
            </div>
            
            <div class="gate-set-card">
                <h4>{H, S, CNOT} <span class="universal-badge not-universal">NOT UNIVERSAL</span></h4>
                <div class="gate-list">
                    <span class="gate-chip">H</span>
                    <span class="gate-chip">S</span>
                    <span class="gate-chip">CNOT</span>
                </div>
                <p style="color:#ff6b6b;margin-top:10px;">This is the Clifford group - NOT universal! Can be efficiently simulated classically.</p>
            </div>
            
            <div class="gate-set-card">
                <h4>{Rx, Ry, CNOT} <span class="universal-badge">UNIVERSAL</span></h4>
                <div class="gate-list">
                    <span class="gate-chip">Rx(θ)</span>
                    <span class="gate-chip">Ry(θ)</span>
                    <span class="gate-chip">CNOT</span>
                </div>
                <p style="color:#888;margin-top:10px;">Continuous rotation gates give exact universality (no approximation needed for single-qubit gates).</p>
            </div>
            
            <div class="gate-set-card">
                <h4>{Toffoli, H} <span class="universal-badge">UNIVERSAL</span></h4>
                <div class="gate-list">
                    <span class="gate-chip">Toffoli</span>
                    <span class="gate-chip">H</span>
                </div>
                <p style="color:#888;margin-top:10px;">Toffoli alone is universal for classical computation. Adding H makes it quantum universal!</p>
            </div>
        </section>

        <section class="section">
            <h2>The Clifford Hierarchy</h2>
            <div class="hierarchy">
                <div class="hierarchy-level level-1">
                    <span class="level-name">Pauli Group</span>
                    <span style="color:#888;">{I, X, Y, Z} - Basic operations</span>
                </div>
                <div class="hierarchy-level level-2">
                    <span class="level-name">Clifford Group</span>
                    <span style="color:#888;">{H, S, CNOT} - Maps Paulis to Paulis</span>
                </div>
                <div class="hierarchy-level level-3">
                    <span class="level-name">+ T Gate</span>
                    <span style="color:#888;">Breaks out of Clifford → Universal!</span>
                </div>
            </div>
            <div class="key-point">
                <p>The T gate is special because it's the simplest gate that takes you <strong>outside</strong> the efficiently-simulable Clifford group!</p>
            </div>
        </section>

        <section class="section">
            <h2>Building Gates from Universal Sets</h2>
            <div class="approximation-visual">
                <h4 style="color:#64ffda;margin-bottom:15px;">Example: Building S from H and T</h4>
                <div class="approx-equation">S = T · T = T²</div>
                <p style="color:#888;">Two T gates equal one S gate (since T⁴ = Z and T² = S)</p>
            </div>
            <div class="approximation-visual">
                <h4 style="color:#64ffda;margin-bottom:15px;">Example: Building Z from T</h4>
                <div class="approx-equation">Z = T⁴</div>
                <p style="color:#888;">Four T gates equal one Z gate</p>
            </div>
            <div class="approximation-visual">
                <h4 style="color:#64ffda;margin-bottom:15px;">Example: Building X from H and Z</h4>
                <div class="approx-equation">X = H · Z · H</div>
                <p style="color:#888;">Hadamard swaps X and Z bases</p>
            </div>
        </section>

        <section class="section">
            <div class="decision-guide">
                <h3>Choosing a Universal Set</h3>
                <div class="decision-item">
                    <span class="goal">Hardware with discrete gates:</span>
                    <span class="solution">Use <span class="gate">{H, T, CNOT}</span> - standard for fault-tolerant QC</span>
                </div>
                <div class="decision-item">
                    <span class="goal">Hardware with continuous control:</span>
                    <span class="solution">Use <span class="gate">{Rx, Ry, CNOT}</span> - no approximation overhead</span>
                </div>
                <div class="decision-item">
                    <span class="goal">Minimize T gate count:</span>
                    <span class="solution">T gates are expensive in fault-tolerant QC - optimize for fewer T gates</span>
                </div>
                <div class="decision-item">
                    <span class="goal">Classical reversible logic:</span>
                    <span class="solution">Use <span class="gate">Toffoli</span> alone (universal for classical)</span>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Why This Matters</h2>
            <div class="highlight">
                <h3>Practical Implications</h3>
                <ul style="margin-left:20px;color:#888;">
                    <li><strong>Compiler design:</strong> Quantum compilers decompose arbitrary gates into universal sets</li>
                    <li><strong>Error correction:</strong> Fault-tolerant gates are limited - universality ensures we can still compute anything</li>
                    <li><strong>Hardware constraints:</strong> Physical qubits may only support certain native gates</li>
                    <li><strong>Algorithm optimization:</strong> Minimizing gate count (especially T gates) improves performance</li>
                </ul>
            </div>
        </section>

        <div class="nav-buttons">
            <a href="../10-unitary-reversibility/index.html" class="btn">Previous: Unitary & Reversibility</a>
            <a href="../12-gate-decomposition/index.html" class="btn btn-primary">Next: Gate Decomposition</a>
        </div>
    </div>
    
    <script>
    let univScene, univCamera, univRenderer, univArrow, univControls;
    let univTheta = 0, univPhi = 0;
    let gateHistory = [];
    
    function initUnivBloch() {
        const container = document.getElementById('universal-bloch');
        if (!container) return;
        
        univScene = new THREE.Scene();
        univScene.background = new THREE.Color(0x0a0a0a);
        univCamera = new THREE.PerspectiveCamera(60, 1, 0.1, 100);
        univCamera.position.set(2.5, 2, 2.5);
        univRenderer = new THREE.WebGLRenderer({ antialias: true });
        univRenderer.setSize(280, 280);
        container.appendChild(univRenderer.domElement);
        
        univScene.add(new THREE.AmbientLight(0xffffff, 0.6));
        univScene.add(new THREE.Mesh(new THREE.SphereGeometry(1, 24, 24), new THREE.MeshPhongMaterial({ color: 0x64ffda, transparent: true, opacity: 0.15 })));
        univScene.add(new THREE.Mesh(new THREE.SphereGeometry(1, 12, 12), new THREE.MeshBasicMaterial({ color: 0x64ffda, wireframe: true, transparent: true, opacity: 0.2 })));
        univScene.add(new THREE.ArrowHelper(new THREE.Vector3(1,0,0), new THREE.Vector3(0,0,0), 1.3, 0xff6b6b, 0.08, 0.04));
        univScene.add(new THREE.ArrowHelper(new THREE.Vector3(0,1,0), new THREE.Vector3(0,0,0), 1.3, 0x4ecdc4, 0.08, 0.04));
        univScene.add(new THREE.ArrowHelper(new THREE.Vector3(0,0,1), new THREE.Vector3(0,0,0), 1.3, 0xffd93d, 0.08, 0.04));
        [{pos:[1.4,0,0],text:'X',color:'#ff6b6b'},{pos:[0,1.4,0],text:'Y',color:'#4ecdc4'},{pos:[0,0,1.4],text:'Z',color:'#ffd93d'}].forEach(l=>{
            const canvas=document.createElement('canvas');canvas.width=32;canvas.height=32;
            const ctx=canvas.getContext('2d');ctx.fillStyle=l.color;ctx.font='bold 20px monospace';ctx.textAlign='center';ctx.fillText(l.text,16,22);
            const sprite=new THREE.Sprite(new THREE.SpriteMaterial({map:new THREE.CanvasTexture(canvas),transparent:true}));
            sprite.position.set(l.pos[0],l.pos[1],l.pos[2]);sprite.scale.set(0.25,0.25,1);univScene.add(sprite);
        });
        
        univArrow = new THREE.ArrowHelper(new THREE.Vector3(0,0,1), new THREE.Vector3(0,0,0), 1, 0x64ffda, 0.12, 0.08);
        univScene.add(univArrow);
        
        univControls = new THREE.OrbitControls(univCamera, univRenderer.domElement);
        univControls.enableDamping = true;
        
        function animateUniv() {
            requestAnimationFrame(animateUniv);
            univControls.update();
            univRenderer.render(univScene, univCamera);
        }
        animateUniv();
    }
    
    function applyUnivGate(gate) {
        gateHistory.push(gate);
        let newTheta = univTheta, newPhi = univPhi;
        
        switch(gate) {
            case 'H':
                const x = Math.sin(univTheta) * Math.cos(univPhi);
                const z = Math.cos(univTheta);
                newTheta = Math.acos(x);
                newPhi = (z >= 0) ? 0 : Math.PI;
                break;
            case 'T':
                newPhi = univPhi + Math.PI/4;
                break;
            case 'X':
                newTheta = Math.PI - univTheta;
                newPhi = -univPhi;
                break;
            case 'Z':
                newPhi = univPhi + Math.PI;
                break;
        }
        
        univTheta = newTheta;
        univPhi = newPhi;
        updateUnivArrow();
        document.getElementById('univ-note').textContent = 'Applied: ' + gateHistory.join(' → ');
    }
    
    function updateUnivArrow() {
        const dir = new THREE.Vector3(
            Math.sin(univTheta) * Math.cos(univPhi),
            Math.sin(univTheta) * Math.sin(univPhi),
            Math.cos(univTheta)
        ).normalize();
        univArrow.setDirection(dir);
    }
    
    function resetUnivBloch() {
        univTheta = 0;
        univPhi = 0;
        gateHistory = [];
        updateUnivArrow();
        document.getElementById('univ-note').textContent = 'Apply gates to reach any point on the sphere';
    }
    
    window.addEventListener('load', initUnivBloch);
    </script>
</body>
</html>
